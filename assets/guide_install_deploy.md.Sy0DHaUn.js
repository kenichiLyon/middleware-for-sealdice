import{_ as n,I as k,c as d,o as r,j as i,J as t,al as o,a as s,w as a}from"./chunks/framework.D35TfS0g.js";const u=JSON.parse('{"title":"安装部署","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/install&deploy.md","filePath":"guide/install&deploy.md","lastUpdated":1765563126000}'),c={name:"guide/install&deploy.md"};function g(y,l,p,F,E,B){const e=k("PluginTabsTab"),h=k("PluginTabs");return r(),d("div",null,[l[8]||(l[8]=i("h1",{id:"安装部署",tabindex:"-1"},[s("安装部署 "),i("a",{class:"header-anchor",href:"#安装部署","aria-label":"Permalink to “安装部署”"},"​")],-1)),l[9]||(l[9]=i("p",null,"本项目目前存在两种方案，可根据实际情况选用。",-1)),l[10]||(l[10]=i("h2",{id:"选用方案",tabindex:"-1"},[s("选用方案 "),i("a",{class:"header-anchor",href:"#选用方案","aria-label":"Permalink to “选用方案”"},"​")],-1)),t(h,{sharedStateKey:"case"},{default:a(()=>[t(e,{label:"tab a+b 方案"},{default:a(()=>[...l[0]||(l[0]=[i("h3",{id:"a-b-方案优点",tabindex:"-1"},[s("a+b 方案优点 "),i("a",{class:"header-anchor",href:"#a-b-方案优点","aria-label":"Permalink to “a+b 方案优点”"},"​")],-1),i("p",null,[s("无需改动现有的 "),i("code",null,"sealdice-core"),s(" 程序，也无需改动 "),i("code",null,"OneBot V11"),s(" 协议端程序，下载好对应中间件后启动即可无感部署。")],-1),i("h3",{id:"a-b-方案缺点",tabindex:"-1"},[s("a+b 方案缺点 "),i("a",{class:"header-anchor",href:"#a-b-方案缺点","aria-label":"Permalink to “a+b 方案缺点”"},"​")],-1),i("p",null,[s("需要下载 "),i("code",null,"middleware-a"),s(" 与 "),i("code",null,"middleware-b"),s(" 两个中间件程序；同时，需要 "),i("code",null,"OneBot V11"),s(" 协议端所在机器具备公网 IP 或已进行了内网穿透")],-1)])]),_:1}),t(e,{label:"tab c 方案"},{default:a(()=>[...l[1]||(l[1]=[i("h3",{id:"c-方案优点",tabindex:"-1"},[s("c 方案优点 "),i("a",{class:"header-anchor",href:"#c-方案优点","aria-label":"Permalink to “c 方案优点”"},"​")],-1),i("p",null,[s("适用 docker 环境，只需要一个中间件程序；无需改动 "),i("code",null,"sealdice-core"),s(" 与 "),i("code",null,"OneBot V11"),s(" 协议端程序。")],-1),i("h3",{id:"c-方案缺点",tabindex:"-1"},[s("c 方案缺点 "),i("a",{class:"header-anchor",href:"#c-方案缺点","aria-label":"Permalink to “c 方案缺点”"},"​")],-1),i("p",null,[s("需要 "),i("code",null,"OneBot V11"),s(" 协议端所在机器具备公网 IP 或已进行了内网穿透；需要具备 docker 与 Linux 操作经验。非 docker 环境需先配置 docker 再使用。")],-1)])]),_:1})]),_:1}),l[11]||(l[11]=i("h2",{id:"获取文件",tabindex:"-1"},[s("获取文件 "),i("a",{class:"header-anchor",href:"#获取文件","aria-label":"Permalink to “获取文件”"},"​")],-1)),t(h,{sharedStateKey:"case"},{default:a(()=>[t(e,{label:"tab a+b 方案"},{default:a(()=>[...l[2]||(l[2]=[i("p",null,[s("从 "),i("a",{href:"https://github.com/Sealdice/middleware-for-sealdice/actions",target:"_blank",rel:"noreferrer"},"actions 构建"),s(" 下载对应平台的二进制文件压缩包，在适合的工作目录解压。")],-1),i("p",null,"或者，a+b 方案已经可以在 docker 环境中运行。",-1),i("h3",{id:"部署组件-a",tabindex:"-1"},[s("部署组件 a "),i("a",{class:"header-anchor",href:"#部署组件-a","aria-label":"Permalink to “部署组件 a”"},"​")],-1),i("p",null,[s("在和 "),i("code",null,"sealdice-core"),s(" 相同的机器上执行以下命令")],-1),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," clone"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://github.com/kenichiLyon/middleware-for-sealdice")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," middleware-a")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mkdir"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -pv"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-data/middleware-a")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cp"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," middleware-a/config.json.example"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-data/middleware-a/config.json")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vim"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-data/middleware-a/config.json")])])])],-1),i("p",null,[i("strong",null,[s("注意： "),i("code",null,"sealdice-core"),s(" 需要与"),i("code",null,"Middleware-a"),s("共享目录"),i("code",null,"sealdice-core/data"),s("，否则可能会导致组件 a 无法读到"),i("code",null,"sealdice-core"),s("的媒体文件")])],-1),i("h3",{id:"部署组件-b",tabindex:"-1"},[s("部署组件 b "),i("a",{class:"header-anchor",href:"#部署组件-b","aria-label":"Permalink to “部署组件 b”"},"​")],-1),i("p",null,[s("在和 "),i("code",null,"OnebotV11协议实现端"),s(" 相同的机器上执行以下命令")],-1),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," clone"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://github.com/kenichiLyon/middleware-for-sealdice")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," middleware-b")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mkdir"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -pv"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-data/middleware-b")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cp"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," middleware-b/config.json.example"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-data/middleware-b/config.json")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vim"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-data/middleware-b/config.json")])])])],-1),i("p",null,[i("strong",null,[s("注意： "),i("code",null,"OnebotV11协议实现端"),s(" 需要与"),i("code",null,"Middleware-b"),s("共享目录"),i("code",null,"data/uploads"),s("，否则可能会导致"),i("code",null,"OnebotV11协议实现端"),s("无法读到"),i("code",null,"middleware-b"),s("的媒体文件")])],-1)])]),_:1}),t(e,{label:"tab c 方案"},{default:a(()=>[...l[3]||(l[3]=[i("p",null,"按如下操作即可获取 c 方案的文件：",-1),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," clone"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://github.com/kenichiLyon/middleware-for-sealdice")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," middleware-c")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mkdir"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -pv"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-data/middleware-c")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cp"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," middleware-c/config.json.example"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-data/middleware-c/config.json")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vim"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-data/middleware-c/config.json")])])])],-1)])]),_:1})]),_:1}),l[12]||(l[12]=i("h2",{id:"配置对应配置文件",tabindex:"-1"},[s("配置对应配置文件 "),i("a",{class:"header-anchor",href:"#配置对应配置文件","aria-label":"Permalink to “配置对应配置文件”"},"​")],-1)),l[13]||(l[13]=i("div",{class:"warning custom-block"},[i("p",{class:"custom-block-title"},"注意："),i("p",null,[s("这里所有的 "),i("code",null,"JSON"),s(" 文件均视作标准 JSON 格式，不支持注释，请不要直接复制粘贴示例，请按照 Standard JSON 格式自行修改。")])],-1)),t(h,{sharedStateKey:"case"},{default:a(()=>[t(e,{label:"tab a+b 方案"},{default:a(()=>[...l[4]||(l[4]=[i("p",null,[i("code",null,"middleware-b"),s(" 的 "),i("code",null,"config.json"),s("：")],-1),i("div",{class:"language-json"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"json"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "listen_http"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'":8081"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," sealdice-core"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 与"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," middleware-a"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 进行连接的端口")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "listen_ws_path"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/ws"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 无需修改")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "upstream_ws_url"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ws://127.0.0.1:6700"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 在"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," Onebot"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," V11"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 协议端配置的正向"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," WebSocket"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 地址")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "upstream_access_token"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"<your-access-token>"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 在"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," Onebot"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," V11"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 协议端配置的"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," access-token")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "upstream_use_query_token"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 是否使用"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," access-token"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 验证")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "server_access_token"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"<your-access-token>"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 在"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," sealdice-core"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 配置的"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," access-token")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "upload_endpoint"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"http://127.0.0.1:8082/upload"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])])],-1),i("p",null,[i("code",null,"middleware-b"),s(" 的 "),i("code",null,"config.json"),s("：")],-1),i("div",{class:"language-json"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"json"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "listen_http"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'":8082"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," middleware-b"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 与"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," middleware-a"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 连接的端口")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "storage_dir"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"<your-storage-dir>"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 用于存储上传文件的目录")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "public_base_url"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"http://127.0.0.1:8082"'),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," #"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 用于"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," middleware-b"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 与"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," middleware-a"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 进行连接的"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," URL")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])])],-1)])]),_:1}),t(e,{label:"tab c 方案"},{default:a(()=>[...l[5]||(l[5]=[i("p",null,[s("进入"),i("code",null,"docker-data/middleware-c"),s("目录内，修改"),i("code",null,"config.json"),s("文件，示例如下")],-1),i("div",{class:"language-json"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"json"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "listen_http"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'":8081"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#无需修改，用于海豹进行连接")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "listen_ws_path"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/ws"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#无需修改，用于海豹进行连接")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "upstream_ws_url"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ws://127.0.0.1:6700"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 在上游Onebot"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," V11"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 配置的正向"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," ws"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 服务器地址")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "upstream_access_token"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"<your-access-token>"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 在上游Onebot"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," V11"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 正向"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," ws"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 服务器配置的"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," access-token")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "upstream_use_query_token"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 上游Onebot"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," V11"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 是否使用"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," access-token"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 验证")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "server_access_token"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"<your-access-token>"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"#"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 在"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," sealdice-core"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 配置的"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," access-token")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "upload_endpoint"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'""')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])])],-1)])]),_:1})]),_:1}),l[14]||(l[14]=i("h2",{id:"部署中间件",tabindex:"-1"},[s("部署中间件 "),i("a",{class:"header-anchor",href:"#部署中间件","aria-label":"Permalink to “部署中间件”"},"​")],-1)),t(h,{sharedStateKey:"deploy"},{default:a(()=>[t(e,{label:"tab a+b 方案"},{default:a(()=>[...l[6]||(l[6]=[i("h3",{id:"linux",tabindex:"-1"},[s("Linux "),i("a",{class:"header-anchor",href:"#linux","aria-label":"Permalink to “Linux”"},"​")],-1),i("ul",null,[i("li",null,[s("如果"),i("code",null,"middleware-b"),s("在 Linux 环境中，那么在 "),i("code",null,"middleware-b"),s(" 所在目录内，执行以下命令启动 "),i("code",null,"middleware-b"),s("：")])],-1),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"./middleware-b")])])])],-1),i("ul",null,[i("li",null,[s("如果"),i("code",null,"middleware-a"),s("在 Linux 环境中，那么在 "),i("code",null,"middleware-a"),s(" 所在目录内，执行以下命令启动 "),i("code",null,"middleware-a"),s("：")])],-1),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"./middleware-a")])])])],-1),i("p",null,[s("启动失败，则按照"),i("code",null,"FAQ"),s("先进行排查，有任何故障请及时前往 issue 区进行反馈。")],-1),i("h3",{id:"windows",tabindex:"-1"},[s("Windows "),i("a",{class:"header-anchor",href:"#windows","aria-label":"Permalink to “Windows”"},"​")],-1),i("ul",null,[i("li",null,[i("p",null,[s("如果"),i("code",null,"middleware-a"),s("在 Windows 环境中，直接双击启动 "),i("code",null,"middleware-a.exe"),s("即可")])]),i("li",null,[i("p",null,[s("如果"),i("code",null,"middleware-b"),s("在 Windows 环境中，直接双击启动 "),i("code",null,"middleware-b.exe"),s("即可")])])],-1),i("p",null,[s("启动失败，则按照"),i("code",null,"FAQ"),s("先进行排查，有任何故障请及时前往 issue 区进行反馈。")],-1),i("p",null,[s("程序启动后，先配置 "),i("code",null,"Onebot V11协议端"),s("，配置成正向 WebSocket 服务器，监听 IP 建议为 "),i("code",null,"0.0.0.0"),s("或 公网 IP，监听端口则按配置文件内地址定，默认为 "),i("code",null,"6700"),s(",随后在配置文件内填写的 access-token，协议端提示连接成功即为协议端连上"),i("code",null,"middleware-a")],-1),i("p",null,[s("配置好协议端并连接成功之后，打开 "),i("code",null,"sealdice-core"),s(" 的 "),i("code",null,"WebUI"),s(",在账号设置内选择 "),i("code",null,"Onebot V11 正向 WS"),s("，填入 "),i("code",null,"middleware-a"),s(" 的监听地址（默认 "),i("code",null,"ws://127.0.0.1:8081/ws"),s("）以及在配置文件内填写的 access-token，之后点击下一步进行连接，如出现 "),i("code",null,"已连接"),s(" 字样且的确未显示异常，有正常的信息通信，则证明连接成功。")],-1),i("h2",{id:"docker-方案",tabindex:"-1"},[s("docker 方案 "),i("a",{class:"header-anchor",href:"#docker-方案","aria-label":"Permalink to “docker 方案”"},"​")],-1),i("p",null,"按照前文部署好后，在 a、b 两台机上的对应工作目录上分别使用",-1),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," compose"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," up"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d")])])])],-1),i("p",null,[s("启动 docker 版本的 "),i("code",null,"middleware-a"),s(" 和 "),i("code",null,"middleware-b"),s("，日志不报错即可开始工作")],-1)])]),_:1}),t(e,{label:"tab c 方案"},{default:a(()=>[...l[7]||(l[7]=[i("p",null,"启动海豹：",-1),i("div",{class:"language-bash"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," compose"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," up"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d")])])])],-1),i("p",null,[s("打开本机 3211 端口（sealdice），打开 "),i("code",null,"sealdice-core"),s(" 的 "),i("code",null,"WebUI"),s(",在账号设置内选择 "),i("code",null,"Onebot V11 正向 WS"),s("，填入 "),i("code",null,"middleware-c"),s(" 的监听地址 "),i("code",null,"ws://<middleware-c-host>:8081/ws"),s("，账号填写正确账号即可，"),i("code",null,"access-token"),s(" 处可为空（与"),i("code",null,"server_access_token"),s(" 相同），如果出现已连接，那么，证明其已连接成功。")],-1)])]),_:1})]),_:1}),l[15]||(l[15]=o('<div class="warning custom-block"><p class="custom-block-title">注意：如监听 IP 设置为 0.0.0.0，请确保已经配置了 access-token 以保证安全</p><p>一般我们不推荐 Onebot V11 协议端监听 IP 设为 0.0.0.0 而不设置 <code>access-token</code>，这样的设置存在安全风险，可能造成无法挽回的后果，如有可能，请设置 <code>access-token</code> 以保障安全。</p><p>我们已告知了你，不建议设置为 0.0.0.0 而不配置<code>access-token</code>，所以，若你确实存在此需求，请自行承担风险。</p></div><div class="warning custom-block"><p class="custom-block-title">注意：</p><p>由于个人能力有限，暂时未对两方案进行日志与错误提示的适配，已有计划适配日志与错误提示，目前建议用户部署完成 (连接成功) 后，在对接了 <code>sealdice-core</code> 的账号内尝试测试图片发送、语音发送等功能是否正常使用，如出现异常，请先按照文档<code>faq</code>处进行排查，如无法解决，请在本项目仓库的 issue 区及时反馈。</p></div>',2))])}const b=n(c,[["render",g]]);export{u as __pageData,b as default};
